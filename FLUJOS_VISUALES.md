# ğŸ”„ Flujos del Sistema - Diagrama Visual

## 1ï¸âƒ£ Flujo de Login

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PÃGINA DE LOGIN                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚   Iniciar SesiÃ³n                     â”‚                  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚                  â”‚
â”‚  â”‚  â”‚ Usuario: [_______________]       â”‚â”‚                  â”‚
â”‚  â”‚  â”‚ ContraseÃ±a: [_____________]      â”‚â”‚                  â”‚
â”‚  â”‚  â”‚ [Iniciar SesiÃ³n]                 â”‚â”‚                  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                      â”‚                                      â”‚
â”‚                      â–¼                                      â”‚
â”‚            POST /api/v1/file/login                         â”‚
â”‚           (valida usuario/contraseÃ±a)                      â”‚
â”‚                      â”‚                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚         â”‚                         â”‚                        â”‚
â”‚    âœ… Correcto               âŒ Incorrecto                 â”‚
â”‚         â”‚                         â”‚                        â”‚
â”‚         â–¼                         â–¼                        â”‚
â”‚   Respuesta JSON:         Error 401                       â”‚
â”‚   {                                                        â”‚
â”‚     "success": true,                                       â”‚
â”‚     "is_admin": true/false                                â”‚
â”‚   }                                                        â”‚
â”‚         â”‚                                                  â”‚
â”‚         â–¼                                                  â”‚
â”‚  localStorage.setItem(                                     â”‚
â”‚    'is_admin',                                             â”‚
â”‚    response.is_admin                                       â”‚
â”‚  )                                                         â”‚
â”‚         â”‚                                                  â”‚
â”‚         â–¼                                                  â”‚
â”‚   Redireccionar a /search                                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2ï¸âƒ£ Flujo de BÃºsqueda (PÃ¡gina Principal)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PÃGINA DE BÃšSQUEDA                         â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  [Cargar Datos] (Solo visible si is_admin == true)     â”‚ â”‚
â”‚  â”‚  [Cerrar SesiÃ³n]                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â–²                                   â”‚
â”‚                          â”‚                                   â”‚
â”‚                    checkAdminStatus()                        â”‚
â”‚                          â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚                                             â”‚            â”‚
â”‚  â”‚ localStorage.getItem('is_admin')            â”‚            â”‚
â”‚  â”‚         === 'true'?                         â”‚            â”‚
â”‚  â”‚         â”‚                                   â”‚            â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                              â”‚            â”‚
â”‚  â”‚    â”‚         â”‚                              â”‚            â”‚
â”‚  â”‚   SÃ        NO                              â”‚            â”‚
â”‚  â”‚    â”‚         â”‚                              â”‚            â”‚
â”‚  â”‚    â–¼         â–¼                              â”‚            â”‚
â”‚  â”‚  Mostrar   Ocultar                          â”‚            â”‚
â”‚  â”‚  botÃ³n     botÃ³n                            â”‚            â”‚
â”‚  â”‚    â”‚         â”‚                              â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚       â”‚         â”‚                                           â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                                  â–¼                          â”‚
â”‚                   GET /api/v1/file/first-data               â”‚
â”‚                 (Cargar primeros 50 registros)              â”‚
â”‚                                  â”‚                          â”‚
â”‚                                  â–¼                          â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚                    â”‚  Tabla de Resultados     â”‚             â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚             â”‚
â”‚                    â”‚  â”‚ Nombre â”‚ CÃ©dula    â”‚  â”‚             â”‚
â”‚                    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚             â”‚
â”‚                    â”‚  â”‚ Juan   â”‚ 12345     â”‚  â”‚             â”‚
â”‚                    â”‚  â”‚ MarÃ­a  â”‚ 67890     â”‚  â”‚             â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚             â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                  â”‚                          â”‚
â”‚                                  â–¼                          â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚                    â”‚  BÃºsqueda Manual         â”‚             â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚             â”‚
â”‚                    â”‚  â”‚ [Buscar...] [Buscar] â”‚ â”‚             â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚             â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3ï¸âƒ£ Flujo de Carga de Archivos (Admin Only)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PÃGINA DE CARGA (UPLOAD)                    â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  localStorage.getItem('is_admin')                  â”‚ â”‚
â”‚  â”‚           === 'true'?                              â”‚ â”‚
â”‚  â”‚           â”‚                                        â”‚ â”‚
â”‚  â”‚      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                   â”‚ â”‚
â”‚  â”‚      â”‚         â”‚                                   â”‚ â”‚
â”‚  â”‚     SÃ        NO                                   â”‚ â”‚
â”‚  â”‚      â”‚         â”‚                                   â”‚ â”‚
â”‚  â”‚      â–¼         â–¼                                   â”‚ â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚   â”‚ FORMULARIO CARGA   â”‚  â”‚ âš ï¸ ACCESO DENEGADO  â”‚   â”‚ â”‚
â”‚  â”‚   â”‚                    â”‚  â”‚                  â”‚   â”‚ â”‚
â”‚  â”‚   â”‚ Drag & Drop        â”‚  â”‚ Solo Admin puede â”‚   â”‚ â”‚
â”‚  â”‚   â”‚ o                  â”‚  â”‚ cargar archivos  â”‚   â”‚ â”‚
â”‚  â”‚   â”‚ [Seleccionar]      â”‚  â”‚                  â”‚   â”‚ â”‚
â”‚  â”‚   â”‚                    â”‚  â”‚ [Volver]         â”‚   â”‚ â”‚
â”‚  â”‚   â”‚ [Cargar]           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚ â”‚
â”‚  â”‚      â”‚                                           â”‚ â”‚
â”‚  â”‚      â–¼                                           â”‚ â”‚
â”‚  â”‚   POST /api/v1/file/upload                      â”‚ â”‚
â”‚  â”‚   (Multipart: archivo)                          â”‚ â”‚
â”‚  â”‚      â”‚                                           â”‚ â”‚
â”‚  â”‚      â–¼                                           â”‚ â”‚
â”‚  â”‚   âœ… Ã‰xito                                       â”‚ â”‚
â”‚  â”‚   "Archivo subido exitosamente"                 â”‚ â”‚
â”‚  â”‚                                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4ï¸âƒ£ Flujo de Control de Acceso

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          SISTEMA DE AUTENTICACIÃ“N Y AUTORIZACIÃ“N            â”‚
â”‚                                                             â”‚
â”‚  Cliente (Frontend) â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Servidor (Backend)     â”‚
â”‚                                                             â”‚
â”‚  1. POST /login                                            â”‚
â”‚     â””â”€â”€â–º Valida credenciales                              â”‚
â”‚          â””â”€â”€â–º Genera sesiÃ³n                               â”‚
â”‚               â””â”€â”€â–º Retorna is_admin                        â”‚
â”‚                    â””â”€â”€â–º {is_admin: true/false}            â”‚
â”‚                                                             â”‚
â”‚  2. Almacena en localStorage                               â”‚
â”‚     â””â”€â”€â–º localStorage.setItem('is_admin', value)          â”‚
â”‚                                                             â”‚
â”‚  3. Frontend verifica rol                                  â”‚
â”‚     â””â”€â”€â–º Muestra/oculta botones                           â”‚
â”‚                                                             â”‚
â”‚  4. Acceso a endpoints protegidos                          â”‚
â”‚     â”œâ”€ GET /api/v1/file/first-data                        â”‚
â”‚     â”œâ”€ POST /api/v1/file/upload  (Admin only)            â”‚
â”‚     â”œâ”€ POST /register             (Admin only)            â”‚
â”‚     â””â”€ GET /api/v1/users          (Admin only)            â”‚
â”‚                                                             â”‚
â”‚  5. ValidaciÃ³n en servidor                                â”‚
â”‚     â”œâ”€ Â¿Existe sesiÃ³n?                                    â”‚
â”‚     â”‚  â”œâ”€ NO â”€â”€â–º Error 401 (No autorizado)               â”‚
â”‚     â”‚  â””â”€ SÃ â”€â”€â–º ContinÃºa                                 â”‚
â”‚     â”‚                                                     â”‚
â”‚     â””â”€ Â¿Es admin? (si es endpoint restringido)           â”‚
â”‚        â”œâ”€ NO â”€â”€â–º Error 403 (Prohibido)                   â”‚
â”‚        â””â”€ SÃ â”€â”€â–º Procesar solicitud                       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5ï¸âƒ£ Matriz de Estados

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MATRIZ DE ACCESO                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PÃ¡gina/Endpoint    â”‚ Admin (âœ…)   â”‚ Usuario (âŒ)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ /login              â”‚ âœ… Acceso    â”‚ âœ… Acceso             â”‚
â”‚ /search             â”‚ âœ… Acceso    â”‚ âœ… Acceso             â”‚
â”‚ /upload             â”‚ âœ… Ver form  â”‚ âŒ Ver aviso          â”‚
â”‚ /logout             â”‚ âœ… Acceso    â”‚ âœ… Acceso             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ API /first-data     â”‚ âœ… GET       â”‚ âœ… GET                â”‚
â”‚ API /search         â”‚ âœ… GET       â”‚ âœ… GET                â”‚
â”‚ API /upload         â”‚ âœ… POST      â”‚ âŒ 403 Error          â”‚
â”‚ API /users          â”‚ âœ… GET       â”‚ âŒ 403 Error          â”‚
â”‚ API /register       â”‚ âœ… POST      â”‚ âŒ 403 Error          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6ï¸âƒ£ Ciclo de Vida de SesiÃ³n

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Sin sesiÃ³n       â”‚
                    â”‚  (Primera vez)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  RedirecciÃ³n a    â”‚
                    â”‚  /login           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Formulario de    â”‚
                    â”‚  login mostrado   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                           â”‚
                â–¼                           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Credenciales    â”‚      â”‚  Credenciales    â”‚
        â”‚  correctas       â”‚      â”‚  incorrectas     â”‚
        â”‚  (âœ…)            â”‚      â”‚  (âŒ)            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                         â”‚
                 â–¼                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Crear sesiÃ³n    â”‚      â”‚  Error 401       â”‚
        â”‚  Con is_admin    â”‚      â”‚  Re-mostrar form â”‚
        â”‚  y username      â”‚      â”‚  Limpiar campos  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Almacenar en    â”‚
        â”‚  localStorage    â”‚
        â”‚  el rol          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Redireccionar   â”‚
        â”‚  a /search       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  SesiÃ³n activa   â”‚
        â”‚  Datos visibles  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Usuario hace     â”‚
        â”‚ click en         â”‚
        â”‚ "Cerrar sesiÃ³n"  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Destruir sesiÃ³n â”‚
        â”‚  Borrar from     â”‚
        â”‚  localStorage    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  RedirecciÃ³n a   â”‚
        â”‚  /login          â”‚
        â”‚  (ciclo reinicia)â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7ï¸âƒ£ Flujo de BÃºsqueda

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                FLUJO DE BÃšSQUEDA                         â”‚
â”‚                                                          â”‚
â”‚  Usuario escribe: "Juan"                                â”‚
â”‚         â”‚                                               â”‚
â”‚         â–¼                                               â”‚
â”‚  Hace clic en "Buscar"                                 â”‚
â”‚         â”‚                                               â”‚
â”‚         â–¼                                               â”‚
â”‚  GET /api/v1/file/search?searchText=Juan               â”‚
â”‚         â”‚                                               â”‚
â”‚         â–¼                                               â”‚
â”‚  Backend:                                              â”‚
â”‚  â”œâ”€ Verifica sesiÃ³n                                    â”‚
â”‚  â”œâ”€ Normaliza texto: "juan" (minÃºsculas)              â”‚
â”‚  â”œâ”€ Busca en columnas:                                â”‚
â”‚  â”‚  - Nombre Infractor                                â”‚
â”‚  â”‚  - CÃ©dula                                          â”‚
â”‚  â”‚  - Comparendo                                      â”‚
â”‚  â”‚  - Placa                                           â”‚
â”‚  â””â”€ Retorna coincidencias                             â”‚
â”‚         â”‚                                               â”‚
â”‚         â–¼                                               â”‚
â”‚  JSON con resultados:                                  â”‚
â”‚  [                                                     â”‚
â”‚    ["Nombre", "CÃ©dula", ...],  (encabezados)         â”‚
â”‚    ["Juan PÃ©rez", "12345", ...],                       â”‚
â”‚    ["Juan GarcÃ­a", "67890", ...],                      â”‚
â”‚    ...                                                 â”‚
â”‚  ]                                                     â”‚
â”‚         â”‚                                               â”‚
â”‚         â–¼                                               â”‚
â”‚  Frontend:                                             â”‚
â”‚  â”œâ”€ Oculta mensaje de carga                           â”‚
â”‚  â”œâ”€ Limpia tabla anterior                             â”‚
â”‚  â”œâ”€ Llena tabla con resultados                        â”‚
â”‚  â”œâ”€ Primera fila como encabezados                     â”‚
â”‚  â”œâ”€ Resto como datos                                  â”‚
â”‚  â””â”€ Muestra nÃºmero de resultados                      â”‚
â”‚         â”‚                                               â”‚
â”‚         â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚ Resultados de bÃºsqueda   â”‚                          â”‚
â”‚  â”‚ (2 registros):           â”‚                          â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                          â”‚
â”‚  â”‚ â”‚ Nombre â”‚ CÃ©dula    â”‚   â”‚                          â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚                          â”‚
â”‚  â”‚ â”‚ Juan P â”‚ 12345     â”‚   â”‚                          â”‚
â”‚  â”‚ â”‚ Juan G â”‚ 67890     â”‚   â”‚                          â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8ï¸âƒ£ Componentes del Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ARQUITECTURA                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  FRONTEND (HTML/CSS/JavaScript)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ login.html      â†’ AutenticaciÃ³n                      â”‚  â”‚
â”‚  â”‚ index.html      â†’ BÃºsqueda + primeros 50 registros   â”‚  â”‚
â”‚  â”‚ upload.html     â†’ Carga de archivos (admin)          â”‚  â”‚
â”‚  â”‚ styles.css      â†’ Estilos compartidos                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼ XHR/Fetch                        â”‚
â”‚                                                             â”‚
â”‚  BACKEND (Python/Flask)                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ app.py                                               â”‚  â”‚
â”‚  â”‚ â”œâ”€ Modelos: User (SQLAlchemy)                       â”‚  â”‚
â”‚  â”‚ â”œâ”€ Rutas:                                            â”‚  â”‚
â”‚  â”‚ â”‚  â”œâ”€ GET  /login                                   â”‚  â”‚
â”‚  â”‚ â”‚  â”œâ”€ POST /api/v1/file/login                       â”‚  â”‚
â”‚  â”‚ â”‚  â”œâ”€ GET  /search                                  â”‚  â”‚
â”‚  â”‚ â”‚  â”œâ”€ GET  /api/v1/file/search                      â”‚  â”‚
â”‚  â”‚ â”‚  â”œâ”€ GET  /api/v1/file/first-data                  â”‚  â”‚
â”‚  â”‚ â”‚  â”œâ”€ GET  /upload                                  â”‚  â”‚
â”‚  â”‚ â”‚  â”œâ”€ POST /api/v1/file/upload                      â”‚  â”‚
â”‚  â”‚ â”‚  â”œâ”€ POST /register (admin only)                   â”‚  â”‚
â”‚  â”‚ â”‚  â”œâ”€ GET  /api/v1/users (admin only)               â”‚  â”‚
â”‚  â”‚ â”‚  â””â”€ GET  /logout                                  â”‚  â”‚
â”‚  â”‚ â”‚                                                   â”‚  â”‚
â”‚  â”‚ config.py   â†’ ConfiguraciÃ³n                         â”‚  â”‚
â”‚  â”‚ utils.py    â†’ Funciones auxiliares                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚                                                             â”‚
â”‚  BASE DE DATOS (SQLite)                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ users.db                                             â”‚  â”‚
â”‚  â”‚ â”œâ”€ Tabla: User                                       â”‚  â”‚
â”‚  â”‚ â”‚  â”œâ”€ id (PK)                                        â”‚  â”‚
â”‚  â”‚ â”‚  â”œâ”€ username (UNIQUE)                              â”‚  â”‚
â”‚  â”‚ â”‚  â”œâ”€ password (hashed)                              â”‚  â”‚
â”‚  â”‚ â”‚  â”œâ”€ role (admin/user)                              â”‚  â”‚
â”‚  â”‚ â”‚  â””â”€ created_at                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  MEMORIA (Datos Excel)                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ current_data    â†’ Lista de filas cargadas            â”‚  â”‚
â”‚  â”‚ current_columns â†’ Nombres de columnas                â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ Se cargan desde /api/v1/file/upload                  â”‚  â”‚
â”‚  â”‚ Se limpian al salir de la aplicaciÃ³n                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Diagrama Visual v1.0**  
**Actualizado**: Noviembre 2024  
**Estado**: âœ… Completo
